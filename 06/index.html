<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="robots" content="noindex">
	<title>【js_06】ブラウザーの操作方法</title>
	<!--css-->
	<link rel="stylesheet" href="../css/base.css" media="all">
	<!--js-->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>

<body style="	height: auto!important; overflow: auto!important;">
<h1>【Chapter6】ブラウザーの操作方法【94〜112】</h1>
<section>
<h2><b>094</b>アラートを表示する</h2>
<table>
	<tr>
		<th>メソッド</th>
		<th>意味</th>
		<th>戻り値</th>
	</tr>
	<tr>
		<td>alert(メッセージ)</td>
		<td>警告ダイアログを表示</td>
		<td>なし</td>
	</tr>
</table>
<ul>
	<li>alert()はメッセージとOKボタンのみの警告ダイアログを表示する</li>
	<li>windowオブジェクトのメソッド</li>
</ul>
<h4>SAMPLE #094<b>アラート</b></h4>
<pre><code>const btn094 = document.querySelector('#btn094');

btn094.addEventListener('click', (event) => {
	alert(`これがアラートです`);
});</code></pre>
<p class="btn" id="btn094">SAMPLE #094</p>
</section><!-- section -->

<section>
<h2><b>095</b>コンファームを表示する</h2>
<table>
	<tr>
		<th>メソッド</th>
		<th>意味</th>
		<th>戻り値</th>
	</tr>
	<tr>
		<td>confirm(メッセージ)</td>
		<td>確認ダイアログを表示</td>
		<td>真偽値</td>
	</tr>
</table>
<ul>
	<li>confirm()はOKとキャンセルがある確認ダイアログを表示する</li>
	<li>OKだとtrue、キャンセルだとfalseを返す</li>
	<li>windowオブジェクトのメソッド</li>
</ul>
<h4>SAMPLE #095<b>コンファーム</b></h4>
<pre><code>const btn095 = document.querySelector('#btn095');

btn095.addEventListener('click', (event) => {
	const confirmResult = confirm('ごはん食べていいですか？');
	alert(`戻り値は${confirmResult}`);
});</code></pre>
<p class="btn" id="btn095">SAMPLE #095</p>
</section><!-- section -->

<section>
<h2><b>096</b>文字入力プロンプトを表示する</h2>
<table>
	<tr>
		<th>メソッド</th>
		<th>意味</th>
		<th>戻り値</th>
	</tr>
	<tr>
		<td>prompt(メッセージ, 入力欄の初期値)</td>
		<td>文字入力プロンプトを表示</td>
		<td>文字列</td>
	</tr>
</table>
<ul>
	<li>prompt()はOKとキャンセルと文字入力欄がある文字入力ダイアログを表示する</li>
	<li>OKだと入力された文字列、キャンセルだとnullを返す</li>
	<li>windowオブジェクトのメソッド</li>
</ul>
<h4>SAMPLE #096<b>プロンプト</b></h4>
<pre><code>const btn096 = document.querySelector('#btn096');

btn096.addEventListener('click', (event) => {
	const promptResult = prompt('おとといの晩ごはんは？', '');
	alert(`戻り値は${promptResult}`);
});</code></pre>
<p class="btn" id="btn096">SAMPLE #096</p>
</section><!-- section -->

<section>
<h2><b>097</b>ウィンドウサイズを調べる</h2>
<table>
	<tr>
		<th>プロパティ</th>
		<th>意味</th>
		<th>型</th>
	</tr>
	<tr>
		<td>window.innerWidth</td>
		<td>ブラウザのビューポートの横幅</td>
		<td>数値</td>
	</tr>
	<tr>
		<td>window.innerHeight</td>
		<td>ブラウザのビューポートの高さ</td>
		<td>数値</td>
	</tr>
</table>
<ul>
	<li>参照したタイミングでのサイズを取得</li>
	<li>幅や高さを変更した場合resizeイベントを使う</li>
	<li>これらのプロパティは読み取り専用</li>
</ul>
<h4>SAMPLE #097<b>ウィンドウサイズの取得（リサイズ）</b></h4>
<pre><code>let w = window.innerWidth;
let h = window.innerHeight;
function windowSize() {
	document.querySelector('.width').innerHTML = `横幅は${w}pxです`;
	document.querySelector('.height').innerHTML = `高さは${h}pxです`;
}
windowSize();
//リサイズイベント
window.addEventListener('resize', resizeHandler);
function resizeHandler(event) {
	w = window.innerWidth;
	h = window.innerHeight;
	windowSize();
}</code></pre>
<p class="width" style="font-size: 20px;">横幅はpxです</p>
<p class="height" style="font-size: 20px;">高さはpxです</p>
</section><!-- section -->

<section>
<h2><b>098</b>デバイスピクセル比を調べる</h2>
<table>
	<tr>
		<th>プロパティ</th>
		<th>意味</th>
		<th>型</th>
	</tr>
	<tr>
		<td>window.devicePixelRatio</td>
		<td>デバイスピクセル比の値</td>
		<td>数値</td>
	</tr>
</table>
<ul>
	<li>devicePixelRatioプロパティはディスプレイの解像度に対する物理ピクセル数を調べる</li>
</ul>
<h4>SAMPLE #098<b>デバイスピクセル比の取得</b></h4>
<pre><code>const dpr = window.devicePixelRatio;
alert(`このデバイスのデバイスピクセル比は「${dpr}」です`);</code></pre>
<p class="btn" onclick="sec098()">SAMPLE #098</p>
</section><!-- section -->

<section>
<h2><b>099</b>デバイスピクセル比をcanvas要素に適用する</h2>
<ul>
	<li>canvasを高解像度ディスプレイできれいに表示させる</li>
	<li>canvasでは表示させたいサイズに対してデバイスピクセル比を掛け算した値を設定する</li>
</ul>
<h4>SAMPLE #099<b>canvas</b></h4>
<canvas></canvas>
</section><!-- section -->

<section>
<h2><b>100</b>タッチ可能か調べる</h2>
<table>
	<tr>
		<th>プロパティ</th>
		<th>意味</th>
		<th>型</th>
	</tr>
	<tr>
		<td>window.ontouchstart</td>
		<td>タッチ開始時のイベント</td>
		<td>関数</td>
	</tr>
	<tr>
		<td>navigator.pointerEnabled</td>
		<td>ポインターが使えるか</td>
		<td>真偽値</td>
	</tr>
	<tr>
		<td>navigator.maxTouchPoints</td>
		<td>ポインターの最大数</td>
		<td>数値</td>
	</tr>
</table>
<ul>
	<li>windowオブジェクトにタッチイベントを監視できるイベントハンドラーontouchstartが存在する場合、iOSかAndroid端末</li>
	<li>タッチの有効可否を判定するpointerEnabledプロパティが存在し、かつタッチ可能なポイントの数maxTouchPointsが0より大きい場合、タッチ操作が可能なブラウザ</li>
</ul>
<h4>SAMPLE #100<b>タッチ可能か調べる</b></h4>
<pre><code>const isSupported = !!(
	'ontouchstart' in window || //ontouchstartが存在するか
	(navigator.pointerEnabled && navigator.maxTouchPoints > 0) //pointerEnabledが存在し、かつmaxTouchPointsが0より大きいか
);
alert(`このデバイスはタッチ可能か「${isSupported}」`);</code></pre>
<p class="btn" onclick="sec100()">SAMPLE #100</p>
</section><!-- section -->

<section>
<h2><b>101</b>ページを移動する</h2>
<table>
	<tr>
		<th>プロパティ</th>
		<th>意味</th>
		<th>型</th>
	</tr>
	<tr>
		<td>location.href</td>
		<td>ブラウザのURL</td>
		<td>文字列</td>
	</tr>
</table>
<ul>
	<li>location.hrefプロパティに文字列でリンクとなるURLを代入する</li>
	<li>代入したタイミングでページ遷移する</li>
	<li>読み取りの場合、現在のURLを取得できる</li>
</ul>
<pre><code>//読み取りの場合
console.log(location.href);    //現在のURLを出力
//書き込みの場合
location.href = 'another.html';    //代入したURLに遷移
</code></pre>
</section><!-- section -->

<section>
<h2><b>102</b>ページをリロードする</h2>
<table>
	<tr>
		<th>メソッド</th>
		<th>意味</th>
	</tr>
	<tr>
		<td>location.reload()</td>
		<td>ページをリロードする</td>
	</tr>
</table>
<pre><code>location.reload();
location.reload(true);    //引数にtrueを指定した場合、キャッシュを無視してリロードする</code></pre>
<p class="btn" onclick="sec102()">リロードする</p>
</section><!-- section -->

<section>
<h2><b>103</b>履歴の前後のページに移動する</h2>
<table>
	<tr>
		<th>メソッド</th>
		<th>意味</th>
		<th>戻り値</th>
	</tr>
	<tr>
		<td>history.back()</td>
		<td>履歴をひとつ戻る</td>
		<td>なし</td>
	</tr>
	<tr>
		<td>history.forward()</td>
		<td>履歴をひとつ進む</td>
		<td>なし</td>
	</tr>
	<tr>
		<td>history.go(数値)</td>
		<td>履歴を任意の数だけ進む</td>
		<td>なし</td>
	</tr>
</table>
<pre><code>history.go(2);    //次のページに2進む
history.go(-2);    //前のページに2戻る
</code></pre>
</section><!-- section -->

<section>
<h2><b>104</b>ハッシュ（#）に応じて処理を分ける</h2>
<table>
	<tr>
		<th>プロパティ</th>
		<th>意味</th>
		<th>型</th>
	</tr>
	<tr>
		<td>location.hash</td>
		<td>アンカー</td>
		<td>文字列</td>
	</tr>
</table>
<ul>
	<li>location.hashプロパティでアンカーを取得できる</li>
</ul>
<pre><code>//読み取りの場合
const hash = location.hash;
console.log(hash);    //（例）'#app'

//書き込みの場合
location.hash = 'app';
</code></pre>
</section><!-- section -->

<section>
<h2><b>105</b>ハッシュの変更を検知する</h2>
<table>
	<tr>
		<th>イベント名</th>
		<th>発生タイミング</th>
	</tr>
	<tr>
		<td>hashchange</td>
		<td>URLのハッシュが変更されたとき</td>
	</tr>
</table>
<h4>SAMPLE #105<b>ハッシュ変更のイベントを監視</b></h4>
<pre><code>window.addEventListener('hashchange', handleHashChange);
handleHashChange();
function handleHashChange() {
	const hash = location.hash;
	document.querySelector('.hashTxt').innerHTML = `現在のアンカーは「${hash}」です`;
}</code></pre>
<p class="btn" onclick="sec105()">ハッシュ変更を監視する</p>
<a href="#orange" class="hashAnchor">orangeのアンカーリンク</a>
<a href="#apple" class="hashAnchor">appleのアンカーリンク</a>
<p class="hashTxt"></p>
</section><!-- section -->

<section>
<h2><b>106</b>新しいウィンドウを開く</h2>
<table>
	<tr>
		<th>メソッド</th>
		<th>意味</th>
		<th>戻り値</th>
	</tr>
	<tr>
		<td>window.open(URL)</td>
		<td>別窓で開く</td>
		<td>新しく開かれたウィンドウのオブジェクト</td>
	</tr>
</table>
<ul>
	<li>window.open()の第一引数にURLを指定する</li>
	<li>focus()メソッドでアクティブにできる（開いたウィンドウが後ろに表示される場合があるため）</li>
	<li>開いたウィンドウは戻り値を使って参照できる</li>
</ul>
<h4>SAMPLE #106<b>新しいウィンドウを開く</b></h4>
<pre><code>const win = window.open('../index.html');
win.focus();</code></pre>
<p class="btn" onclick="sec106()">SAMPLE #106</p>
</section><!-- section -->

<section>
<h2><b>107</b>ウィンドウのスクロール量を調べる</h2>
<table>
	<tr>
		<th>プロパティ</th>
		<th>意味</th>
		<th>型</th>
	</tr>
	<tr>
		<td>window.scrollX</td>
		<td>水平方向のスクロール量</td>
		<td>数値</td>
	</tr>
	<tr>
		<td>window.scrollY</td>
		<td>垂直方向のスクロール量</td>
		<td>数値</td>
	</tr>
</table>
<h4>SAMPLE #107<b>ウィンドウのスクロール量</b></h4>
<pre><code>window.addEventListener('scroll', scrollHandler);
function scrollHandler(event) {
	const scrX = window.scrollX;
	const scrY = window.scrollY;
	document.querySelector('.scrollX').innerHTML = `横スクロール量は${scrX}pxです`;
	document.querySelector('.scrollY').innerHTML = `縦スクロール量は${scrY}pxです`;
}</code></pre>
<p class="scrollX" style="font-size: 20px;">横スクロール量はpxです</p>
<p class="scrollY" style="font-size: 20px;">縦スクロール量はpxです</p>
</section><!-- section -->

<section>
<h2><b>108</b>ウィンドウをスクロールさせる</h2>
<table>
	<tr>
		<th>メソッド</th>
		<th>意味</th>
		<th>戻り値</th>
	</tr>
	<tr>
		<td>scrollTo(X, Y)</td>
		<td>指定した座標までスクロール</td>
		<td>なし</td>
	</tr>
</table>
<h4>SAMPLE #108<b>scrollTo()</b></h4>
<pre><code>window.addEventListener('click', () => window.scrollTo(0, 1000));</code></pre>
<p class="btn" onclick="sec108()">SAMPLE #108</p>
</section><!-- section -->

<section>
<h2><b>109</b>タイトルを書き換える</h2>
<table>
	<tr>
		<th>プロパティ</th>
		<th>意味</th>
		<th>型</th>
	</tr>
	<tr>
		<td>document.title</td>
		<td>ウェブページのタイトル</td>
		<td>文字列</td>
	</tr>
</table>
<h3>読み取りの場合</h3>
<pre><code>const title = document.title;</code></pre>
<h4>SAMPLE #109<b>タイトルを書き換える</b></h4>
<pre><code>document.title = '任意のタイトル';</code></pre>
<p class="btn" onclick="sec109()">SAMPLE #109</p>
</section><!-- section -->

<section>
<h2><b>110</b>ページにフォーカスされているか調べる</h2>
<table>
	<tr>
		<th>イベント名</th>
		<th>発生タイミング</th>
	</tr>
	<tr>
		<td>focus</td>
		<td>フォーカスがあたったとき</td>
	</tr>
	<tr>
		<td>blur</td>
		<td>フォーカスがはずれたとき</td>
	</tr>
</table>
<h4>SAMPLE #110<b>ページにフォーカスされているか調べる</b></h4>
<pre><code>window.addEventListener('focus', () => {
	document.querySelector('.focus').innerHTML = 'フォーカスがあたっている';
});
window.addEventListener('blur', () => {
	document.querySelector('.focus').innerHTML = 'フォーカスがはずれている';
});</code></pre>
<p class="focus" style="font-size: 20px;"></p>
</section><!-- section -->

<section>
<h2><b>111</b>全画面表示にする</h2>
<table>
	<tr>
		<th>メソッド</th>
		<th>意味</th>
		<th>戻り値</th>
	</tr>
	<tr>
		<td>element.requestFullscreen()</td>
		<td>フルスクリーンで表示する</td>
		<td>Promise</td>
	</tr>
	<tr>
		<td>document.exitFullscreen()</td>
		<td>フルスクリーンを解除する</td>
		<td>Promise</td>
	</tr>
</table>
<ul>
	<li>requestFullscreen()は任意の要素を指定できる</li>
	<li>exitFullscreen()はdocumentのみ指定できる</li>
	<li>現時点では対応していないブラウザがあるためベンダープレフィックスを付与する</li>
</ul>
<h4>SAMPLE #111<b>全画面表示と解除</b></h4>
<pre><code>const btn = document.querySelector('.request');
const btnExit = document.querySelector('.exit');

//フルスクリーンにする
btn.addEventListener('click', (event) => {
	myRequestFullScreen(document.body);
});
//フルスクリーンを解除
btnExit.addEventListener('click', (event) => {
	myCancelFullScreen();
});

function myRequestFullScreen(element) {
	if (element.requestFullscreen) {
		//標準仕様
		element.requestFullscreen();
	} else if (element.webkitRequestFullscreen) {
		//Safari, Chrome
		element.webkitRequestFullscreen();
	} else if (element.mozRequestFullscreen) {
		//Firefox
		element.mozRequestFullscreen();
	} else if (element.msRequestFullscreen) {
		//IE11+
		element.msRequestFullscreen();
	}
}

function myCancelFullScreen() {
	if (document.exitFullscreen) {
		//標準仕様
		document.exitFullscreen();
	} else if (document.webkitCancelFullscreen) {
		//Safari, Chrome
		document.webkitCancelFullscreen();
	} else if (document.mozCancelFullscreen) {
		//Firefox
		document.mozCancelFullscreen();
	} else if (document.msExitFullscreen) {
		//IE11+
		document.msExitFullscreen();
	}
}</code></pre>
<p class="btn request" >全画面表示にする</p>
<p class="btn exit" >全画面表示を解除</p>
</section><!-- section -->

<section>
<h2><b>112</b>オンライン、オフラインに応じて処理を分ける</h2>
<table>
	<tr>
		<th>プロパティ</th>
		<th>意味</th>
		<th>型</th>
	</tr>
	<tr>
		<td>navigator.onLine</td>
		<td>ネットワーク状況を取得</td>
		<td>真偽値</td>
	</tr>
</table>
<ul>
	<li>onLineプロパティは読み取り専用</li>
	<li>trueの場合はネットワークにつながっていることを示す</li>
</ul>
<h4>SAMPLE #112<b>onLineプロパティ</b></h4>
<pre><code>const isOnline = navigator.onLine;
if(isOnline === true) {
	console.log('オンラインです');
} else {
	console.log('オフラインです');
}
</code></pre>
<p class="btn" onclick="sec112()">SAMPLE #112</p>
<h3>onlineイベント・offlineイベント</h3>
<ul>
	<li>windowオブジェクトに対してonlineイベント・offlineイベントを監視すればネットワーク状況の変化を監視できる</li>
</ul>
<pre><code>window.addEventListener('online', () => {
	alert('オンラインです');
});
window.addEventListener('offline', () => {
	alert('オフラインです');
});
</code></pre>
</section><!-- section -->


	<script src="../js/06.js"></script>
</body>

</html>